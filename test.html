<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Simon Test Space</title>
  <link rel="stylesheet" href="custom.css">
</head>
<body>
	<div class="gameboard">
		<div data-key="37" id="button1" class="button">Button 1</div>
		<div data-key="38" id="button2" class="button">Button 2</div>
		<div data-key="39" id="button3" class="button">Button 3</div>
		<div data-key="40" id="button4" class="button">Button 4</div>
	</div>

	<audio data-key="37" src="https://s3.amazonaws.com/freecodecamp/simonSound1.mp3" ></audio>
    <audio data-key="38" src="https://s3.amazonaws.com/freecodecamp/simonSound2.mp3" ></audio>
    <audio data-key="39" src="https://s3.amazonaws.com/freecodecamp/simonSound3.mp3" ></audio>
    <audio data-key="40" src="https://s3.amazonaws.com/freecodecamp/simonSound4.mp3" ></audio>

    <script>
    	const buttons = Array.from(document.querySelectorAll('.button'));
    	buttons.forEach(button => button.addEventListener('transitionend', removeTransition));
    	window.addEventListener('keydown', playSound);

    	//Function to deal with CSS transition, to be wired up later on
    	function removeTransition(e) {
		    if (e.propertyName !== 'transform') return;
		    e.target.classList.remove('playing');
  		}

  		function playSound(e) {
	    	const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
	    	const button = document.querySelector(`div[data-key="${e.keyCode}"]`);
	   		if (!audio) return;

	    	button.classList.add('playing');
	    	audio.currentTime = 0;
	    	audio.play();
  		}

    </script>
</body>
</html>
